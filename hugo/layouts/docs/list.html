{{ define "main" }}
<div class="page">
  <div class="container size-lg">
    <h1>Documentation</h1>
    
    {{ $pages := .Pages }}
    {{ $groups := slice }}
    
    {{/* Collect unique groups */}}
    {{ range $pages }}
      {{ if .Params.group }}
        {{ $groups = $groups | append .Params.group }}
      {{ end }}
    {{ end }}
    {{ $groups = $groups | uniq }}
    
    <div class="docs-list">
      {{ range $groups }}
        {{ $currentGroup := . }}
        <section class="docs-list__section">
          <h2>{{ $currentGroup }}</h2>
          <ul class="docs-list__grid">
            {{ range where $pages "Params.group" $currentGroup }}
            <li class="docs-list__item">
              <a href="{{ .RelPermalink }}">{{ .Title }}</a>
              {{ with .Params.description }}
              <p>{{ . }}</p>
              {{ end }}
            </li>
            {{ end }}
          </ul>
        </section>
      {{ end }}
    </div>
  </div>
</div>
{{ end }}
